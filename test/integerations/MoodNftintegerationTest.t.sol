// SPDX-License-Identifier: MIT

pragma solidity ^0.8.13;
import {Test, console} from "forge-std/Test.sol";
import {MoodNft} from "../../src/MoodNft.sol";
import {DeployMoodNft} from "../../script/DeployMoodNft.s.sol";

contract MoodNftIntegerationTest is Test {

  MoodNft  moodNft;
string public constant SAD_SVG_Image_URI = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNHB4IiBoZWlnaHQ9IjEwMjRweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8IS0tIEJhY2tncm91bmQgZ3JhZGllbnQgLS0+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImJnR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjBmMGYwIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNkOWQ5ZDkiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJmYWNlU2hhZG93IiBjeD0iNTAlIiBjeT0iNTAlIiByPSI1MCUiIGZ4PSI1MCUiIGZ5PSI1MCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjlmOWY5IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZTBlMGUwIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDwvcmFkaWFsR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSJzb2Z0R2xvdyIgeD0iLTIwJSIgeT0iLTIwJSIgd2lkdGg9IjE0MCUiIGhlaWdodD0iMTQwJSI+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjgiIHJlc3VsdD0iYmx1ciIvPgogICAgICA8ZmVDb21wb3NpdGUgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iYmx1ciIgb3BlcmF0b3I9Im92ZXIiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIENpcmN1bGFyIGJhY2tncm91bmQgd2l0aCBzdWJ0bGUgc2hhZG93IC0tPgogIDxjaXJjbGUgY3g9IjUxMiIgY3k9IjUxMiIgcj0iNDQ4IiBmaWxsPSJ1cmwoI2JnR3JhZGllbnQpIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI3NvZnRHbG93KSIvPgogIAogIDwhLS0gRmFjZSBiYXNlIHdpdGggcmVhbGlzdGljIHNoYWRpbmcgLS0+CiAgPGNpcmNsZSBjeD0iNTEyIiBjeT0iNTEyIiByPSIzNzIiIGZpbGw9InVybCgjZmFjZVNoYWRvdykiIHN0cm9rZT0iI2Q1ZDVkNSIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgCiAgPCEtLSBFeWVzIHdpdGggZGVwdGggYW5kIGhpZ2hsaWdodHMgLS0+CiAgPGc+CiAgICA8IS0tIExlZnQgZXllIC0tPgogICAgPGVsbGlwc2UgY3g9IjM4NCIgY3k9IjQyMSIgcng9IjMyIiByeT0iMjgiIGZpbGw9IiMzMzMiLz4KICAgIDxlbGxpcHNlIGN4PSIzODAiIGN5PSI0MTUiIHJ4PSI4IiByeT0iNiIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC44Ii8+CiAgICAKICAgIDwhLS0gUmlnaHQgZXllIC0tPgogICAgPGVsbGlwc2UgY3g9IjY0MCIgY3k9IjQyMSIgcng9IjMyIiByeT0iMjgiIGZpbGw9IiMzMzMiLz4KICAgIDxlbGxpcHNlIGN4PSI2MzYiIGN5PSI0MTUiIHJ4PSI4IiByeT0iNiIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC44Ii8+CiAgICAKICAgIDwhLS0gRXllIHJlZmxlY3Rpb25zIC0tPgogICAgPGNpcmNsZSBjeD0iMzkwIiBjeT0iNDEwIiByPSI0IiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjkiLz4KICAgIDxjaXJjbGUgY3g9IjY0NiIgY3k9IjQxMCIgcj0iNCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC45Ii8+CiAgPC9nPgogIAogIDwhLS0gTW91dGggd2l0aCByZWFsaXN0aWMgY3VydmUgYW5kIHNoYWRpbmcgLS0+CiAgPHBhdGggZD0iTTUxMiA2NTAgUSA0MTIgNjUwIDM4NCA2MDAgUSA0MTIgNjgwIDUxMiA2ODAgUSA2MTIgNjgwIDY0MCA2MDAgUSA2MTIgNjUwIDUxMiA2NTAiIAogICAgICAgIGZpbGw9IiMzMzMiIGZpbGwtb3BhY2l0eT0iMC44IiBzdHJva2U9IiMyMjIiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgogIAogIDwhLS0gU3VidGxlIGNoZWVrIGJsdXNoIC0tPgogIDxlbGxpcHNlIGN4PSI0MjAiIGN5PSI1MjAiIHJ4PSI0MCIgcnk9IjMwIiBmaWxsPSIjZmZiNmMxIiBvcGFjaXR5PSIwLjE1Ii8+CiAgPGVsbGlwc2UgY3g9IjYwNCIgY3k9IjUyMCIgcng9IjQwIiByeT0iMzAiIGZpbGw9IiNmZmI2YzEiIG9wYWNpdHk9IjAuMTUiLz4KICAKICA8IS0tIERldGFpbGVkIGV5ZWJyb3dzIC0tPgogIDxwYXRoIGQ9Ik0zNDAgMzgwIFEgMzgwIDM1MCA0MjAgMzcwIiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iNiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgPHBhdGggZD0iTTY4NCAzNzAgUSA3MjQgMzUwIDc2NCAzODAiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSI2IiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICAKICA8IS0tIFN1YnRsZSBmYWNpYWwgY29udG91cnMgLS0+CiAgPHBhdGggZD0iTTUxMiA0ODAgUSA0ODAgNTIwIDUxMiA1NjAgUSA1NDQgNTIwIDUxMiA0ODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2Q1ZDVkNSIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4KPC9zdmc+";
string public constant HAPPY_SVG_Image_URI = "data:image/svg+xml;base64,Cjxzdmcgdmlld0JveD0iMCAwIDIwMCAyMDAiIHdpZHRoPSI0MDAiICBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIGZpbGw9InllbGxvdyIgcj0iNzgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMyIvPgogIDxnIGNsYXNzPSJleWVzIj4KICAgIDxjaXJjbGUgY3g9IjcwIiBjeT0iODIiIHI9IjEyIi8+CiAgICA8Y2lyY2xlIGN4PSIxMjciIGN5PSI4MiIgcj0iMTIiLz4KICA8L2c+CiAgPHBhdGggZD0ibTEzNi44MSAxMTYuNTNjLjY5IDI2LjE3LTY0LjExIDQyLTgxLjUyLS43MyIgc3R5bGU9ImZpbGw6bm9uZTsgc3Ryb2tlOiBibGFjazsgc3Ryb2tlLXdpZHRoOiAzOyIvPgo8L3N2Zz4K";
address USER= makeAddr("user");

string  public constant SAD_SVG_URI="data:application/json;base64,eyJuYW1lIjoiTW9vZE5mdCIsICJkZXNjcmlwdGlvbiI6IkFuIE5GVCB0aGF0IHJlZmxlY3RzIHRoZSBtb29kIG9mIHRoZSBvd25lciwgMTAwJSBvbiBDaGFpbiEiLCAiYXR0cmlidXRlcyI6IFt7InRyYWl0X3R5cGUiOiAibW9vZGluZXNzIiwgInZhbHVlIjogMTAwfV0sICJpbWFnZSI6ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UQXlOSEI0SWlCb1pXbG5hSFE5SWpFd01qUndlQ0lnZG1sbGQwSnZlRDBpTUNBd0lERXdNalFnTVRBeU5DSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNEtJQ0E4SVMwdElFSmhZMnRuY205MWJtUWdaM0poWkdsbGJuUWdMUzArQ2lBZ1BHUmxabk0rQ2lBZ0lDQThiR2x1WldGeVIzSmhaR2xsYm5RZ2FXUTlJbUpuUjNKaFpHbGxiblFpSUhneFBTSXdKU0lnZVRFOUlqQWxJaUI0TWowaU1UQXdKU0lnZVRJOUlqRXdNQ1VpUGdvZ0lDQWdJQ0E4YzNSdmNDQnZabVp6WlhROUlqQWxJaUJ6ZEc5d0xXTnZiRzl5UFNJalpqQm1NR1l3SWlBdlBnb2dJQ0FnSUNBOGMzUnZjQ0J2Wm1aelpYUTlJakV3TUNVaUlITjBiM0F0WTI5c2IzSTlJaU5rT1dRNVpEa2lJQzgrQ2lBZ0lDQThMMnhwYm1WaGNrZHlZV1JwWlc1MFBnb2dJQ0FnUEhKaFpHbGhiRWR5WVdScFpXNTBJR2xrUFNKbVlXTmxVMmhoWkc5M0lpQmplRDBpTlRBbElpQmplVDBpTlRBbElpQnlQU0kxTUNVaUlHWjRQU0kxTUNVaUlHWjVQU0kxTUNVaVBnb2dJQ0FnSUNBOGMzUnZjQ0J2Wm1aelpYUTlJakFsSWlCemRHOXdMV052Ykc5eVBTSWpaamxtT1dZNUlpQnpkRzl3TFc5d1lXTnBkSGs5SWpFaUx6NEtJQ0FnSUNBZ1BITjBiM0FnYjJabWMyVjBQU0l4TURBbElpQnpkRzl3TFdOdmJHOXlQU0lqWlRCbE1HVXdJaUJ6ZEc5d0xXOXdZV05wZEhrOUlqRWlMejRLSUNBZ0lEd3ZjbUZrYVdGc1IzSmhaR2xsYm5RK0NpQWdJQ0E4Wm1sc2RHVnlJR2xrUFNKemIyWjBSMnh2ZHlJZ2VEMGlMVEl3SlNJZ2VUMGlMVEl3SlNJZ2QybGtkR2c5SWpFME1DVWlJR2hsYVdkb2REMGlNVFF3SlNJK0NpQWdJQ0FnSUR4bVpVZGhkWE56YVdGdVFteDFjaUJ6ZEdSRVpYWnBZWFJwYjI0OUlqZ2lJSEpsYzNWc2REMGlZbXgxY2lJdlBnb2dJQ0FnSUNBOFptVkRiMjF3YjNOcGRHVWdhVzQ5SWxOdmRYSmpaVWR5WVhCb2FXTWlJR2x1TWowaVlteDFjaUlnYjNCbGNtRjBiM0k5SW05MlpYSWlMejRLSUNBZ0lEd3ZabWxzZEdWeVBnb2dJRHd2WkdWbWN6NEtJQ0FLSUNBOElTMHRJRU5wY21OMWJHRnlJR0poWTJ0bmNtOTFibVFnZDJsMGFDQnpkV0owYkdVZ2MyaGhaRzkzSUMwdFBnb2dJRHhqYVhKamJHVWdZM2c5SWpVeE1pSWdZM2s5SWpVeE1pSWdjajBpTkRRNElpQm1hV3hzUFNKMWNtd29JMkpuUjNKaFpHbGxiblFwSWlCemRISnZhMlU5SWlOalkyTWlJSE4wY205clpTMTNhV1IwYUQwaU1pSWdabWxzZEdWeVBTSjFjbXdvSTNOdlpuUkhiRzkzS1NJdlBnb2dJQW9nSUR3aExTMGdSbUZqWlNCaVlYTmxJSGRwZEdnZ2NtVmhiR2x6ZEdsaklITm9ZV1JwYm1jZ0xTMCtDaUFnUEdOcGNtTnNaU0JqZUQwaU5URXlJaUJqZVQwaU5URXlJaUJ5UFNJek56SWlJR1pwYkd3OUluVnliQ2dqWm1GalpWTm9ZV1J2ZHlraUlITjBjbTlyWlQwaUkyUTFaRFZrTlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l4SWk4K0NpQWdDaUFnUENFdExTQkZlV1Z6SUhkcGRHZ2daR1Z3ZEdnZ1lXNWtJR2hwWjJoc2FXZG9kSE1nTFMwK0NpQWdQR2MrQ2lBZ0lDQThJUzB0SUV4bFpuUWdaWGxsSUMwdFBnb2dJQ0FnUEdWc2JHbHdjMlVnWTNnOUlqTTROQ0lnWTNrOUlqUXlNU0lnY25nOUlqTXlJaUJ5ZVQwaU1qZ2lJR1pwYkd3OUlpTXpNek1pTHo0S0lDQWdJRHhsYkd4cGNITmxJR040UFNJek9EQWlJR041UFNJME1UVWlJSEo0UFNJNElpQnllVDBpTmlJZ1ptbHNiRDBpSTJabVppSWdiM0JoWTJsMGVUMGlNQzQ0SWk4K0NpQWdJQ0FLSUNBZ0lEd2hMUzBnVW1sbmFIUWdaWGxsSUMwdFBnb2dJQ0FnUEdWc2JHbHdjMlVnWTNnOUlqWTBNQ0lnWTNrOUlqUXlNU0lnY25nOUlqTXlJaUJ5ZVQwaU1qZ2lJR1pwYkd3OUlpTXpNek1pTHo0S0lDQWdJRHhsYkd4cGNITmxJR040UFNJMk16WWlJR041UFNJME1UVWlJSEo0UFNJNElpQnllVDBpTmlJZ1ptbHNiRDBpSTJabVppSWdiM0JoWTJsMGVUMGlNQzQ0SWk4K0NpQWdJQ0FLSUNBZ0lEd2hMUzBnUlhsbElISmxabXhsWTNScGIyNXpJQzB0UGdvZ0lDQWdQR05wY21Oc1pTQmplRDBpTXprd0lpQmplVDBpTkRFd0lpQnlQU0kwSWlCbWFXeHNQU0lqWm1abUlpQnZjR0ZqYVhSNVBTSXdMamtpTHo0S0lDQWdJRHhqYVhKamJHVWdZM2c5SWpZME5pSWdZM2s5SWpReE1DSWdjajBpTkNJZ1ptbHNiRDBpSTJabVppSWdiM0JoWTJsMGVUMGlNQzQ1SWk4K0NpQWdQQzluUGdvZ0lBb2dJRHdoTFMwZ1RXOTFkR2dnZDJsMGFDQnlaV0ZzYVhOMGFXTWdZM1Z5ZG1VZ1lXNWtJSE5vWVdScGJtY2dMUzArQ2lBZ1BIQmhkR2dnWkQwaVRUVXhNaUEyTlRBZ1VTQTBNVElnTmpVd0lETTROQ0EyTURBZ1VTQTBNVElnTmpnd0lEVXhNaUEyT0RBZ1VTQTJNVElnTmpnd0lEWTBNQ0EyTURBZ1VTQTJNVElnTmpVd0lEVXhNaUEyTlRBaUlBb2dJQ0FnSUNBZ0lHWnBiR3c5SWlNek16TWlJR1pwYkd3dGIzQmhZMmwwZVQwaU1DNDRJaUJ6ZEhKdmEyVTlJaU15TWpJaUlITjBjbTlyWlMxM2FXUjBhRDBpTVNJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKeWIzVnVaQ0l2UGdvZ0lBb2dJRHdoTFMwZ1UzVmlkR3hsSUdOb1pXVnJJR0pzZFhOb0lDMHRQZ29nSUR4bGJHeHBjSE5sSUdONFBTSTBNakFpSUdONVBTSTFNakFpSUhKNFBTSTBNQ0lnY25rOUlqTXdJaUJtYVd4c1BTSWpabVppTm1NeElpQnZjR0ZqYVhSNVBTSXdMakUxSWk4K0NpQWdQR1ZzYkdsd2MyVWdZM2c5SWpZd05DSWdZM2s5SWpVeU1DSWdjbmc5SWpRd0lpQnllVDBpTXpBaUlHWnBiR3c5SWlObVptSTJZekVpSUc5d1lXTnBkSGs5SWpBdU1UVWlMejRLSUNBS0lDQThJUzB0SUVSbGRHRnBiR1ZrSUdWNVpXSnliM2R6SUMwdFBnb2dJRHh3WVhSb0lHUTlJazB6TkRBZ016Z3dJRkVnTXpnd0lETTFNQ0EwTWpBZ016Y3dJaUJ6ZEhKdmEyVTlJaU16TXpNaUlITjBjbTlyWlMxM2FXUjBhRDBpTmlJZ1ptbHNiRDBpYm05dVpTSWdjM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWk4K0NpQWdQSEJoZEdnZ1pEMGlUVFk0TkNBek56QWdVU0EzTWpRZ016VXdJRGMyTkNBek9EQWlJSE4wY205clpUMGlJek16TXlJZ2MzUnliMnRsTFhkcFpIUm9QU0kySWlCbWFXeHNQU0p1YjI1bElpQnpkSEp2YTJVdGJHbHVaV05oY0QwaWNtOTFibVFpTHo0S0lDQUtJQ0E4SVMwdElGTjFZblJzWlNCbVlXTnBZV3dnWTI5dWRHOTFjbk1nTFMwK0NpQWdQSEJoZEdnZ1pEMGlUVFV4TWlBME9EQWdVU0EwT0RBZ05USXdJRFV4TWlBMU5qQWdVU0ExTkRRZ05USXdJRFV4TWlBME9EQWlJR1pwYkd3OUltNXZibVVpSUhOMGNtOXJaVDBpSTJRMVpEVmtOU0lnYzNSeWIydGxMWGRwWkhSb1BTSXhJaUJ2Y0dGamFYUjVQU0l3TGpVaUx6NEtQQzl6ZG1jKyJ9";

DeployMoodNft public deployer;
  function setUp() public {
    deployer = new DeployMoodNft();
     moodNft= deployer.run();
  }


function testViewTokenURIIntegeration() public {
    vm.startPrank(USER);
    moodNft._mintNft();
    console.log(moodNft.tokenURI(0));
}


    function testFlipTokenToSad() public {
        vm.prank(USER);
        moodNft._mintNft();

        vm.prank(USER);
        moodNft.FlipMood(0);

        assert(
            keccak256(abi.encodePacked(moodNft.tokenURI(0)))==keccak256(abi.encodePacked(SAD_SVG_URI))
           
        );
    }

}